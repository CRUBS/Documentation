
<!DOCTYPE html>

<html lang="fr">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>8.3.1. Installation &#8212; Documentation Doc Outil Crubs 1.0.0</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <script src="../_static/translations.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Recherche" href="../search.html" />
    <link rel="next" title="8.4. Liaison Serie" href="Tree-Liaison_Serie.html" />
    <link rel="prev" title="8.3. Configuration Raspi" href="Tree-Configuration_Raspi.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <div class="section" id="installation">
<h1><span class="section-number">8.3.1. </span>Installation<a class="headerlink" href="#installation" title="Lien permanent vers ce titre">¶</a></h1>
<p>Utilisation de Raspberry Pi Imager (<a class="reference external" href="https://www.raspberrypi.com/software/">https://www.raspberrypi.com/software/</a>) pour créer une carte SD bootable avec l’OS Raspberry PI OS. Cet OS a l’avantage d’être léger et simple à utiliser.</p>
<a class="reference internal image-reference" href="../_images/raspi_imager.png"><img alt="../_images/raspi_imager.png" class="align-center" src="../_images/raspi_imager.png" style="width: 511.5px; height: 344.25px;" /></a>
<p></p>
<div class="section" id="mise-a-jour">
<h2><span class="section-number">8.3.1.1. </span>Mise a jour<a class="headerlink" href="#mise-a-jour" title="Lien permanent vers ce titre">¶</a></h2>
<p>Une fois la PI demarrée, la première chose à faire est de la mettre à jour. Pour cela entrer dans le terminal les commandes suivantes :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get update
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get upgrade
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get autoremove
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo reboot
</pre></div>
</div>
</div>
<div class="section" id="ecran-tactile">
<h2><span class="section-number">8.3.1.2. </span>Ecran tactile<a class="headerlink" href="#ecran-tactile" title="Lien permanent vers ce titre">¶</a></h2>
<p>Après cette manipulation l’écran tactile n’était plus reconnu lors du boot de la PI. Nous avons dû modifier un fichier pour résoudre ce problème :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo nano /boot/config.txt
</pre></div>
</div>
<p>Il vous faut maintenant trouver la ligne suivante :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">dtoverlay</span><span class="o">=</span>vc4-kms-v3d
</pre></div>
</div>
<p>Et la remplacer par :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">dtoverlay</span><span class="o">=</span>vc4-fkms-v3d
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/boot_config.png"><img alt="../_images/boot_config.png" class="align-center" src="../_images/boot_config.png" style="width: 810.0px; height: 450.0px;" /></a>
<p></p>
<p>Un nouveau problème apparaît désormais, chacun de vos click sur l’ecran aura une position en X decaler. Pour cela rendez vous dans le menu en haut à gauche &gt; préférence &gt; Screen Configuration.
Une nouvelle fenêtre s’ouvre, maintenant cliquez sur Disposition &gt; Screens &gt; Composite-1 et décochez « Active »
Aide : <a class="reference external" href="https://github.com/raspberrypi/documentation/issues/1018">https://github.com/raspberrypi/documentation/issues/1018</a></p>
<p>Maintenant tout devrait fonctionner normalement.</p>
</div>
<div class="section" id="addresse-ip-statique">
<h2><span class="section-number">8.3.1.3. </span>Addresse IP statique<a class="headerlink" href="#addresse-ip-statique" title="Lien permanent vers ce titre">¶</a></h2>
<p>Afin de pouvoir nous connecter plus facilement en SSH à la PI nous allons déclarer une IP fixe sur l’interface ethernet eth0 et wifi wlan0. Pour cela rendez vous dans le fichier suivant :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo nano /etc/network/interfaces
</pre></div>
</div>
<p>Puis rajouter à la fin du fichier les lignes suivantes :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>auto wlan0
iface wlan0 inet static
        address <span class="m">192</span>.168.1.10/24

auto eth0
iface eth0 inet static
        address <span class="m">192</span>.168.2.10/24
</pre></div>
</div>
<p>Vous pouvez fermer le fichier avec CTRL+X puis Y.</p>
<p>Nous devons maintenant activer le service SSH. Si cela n’est pas déjà fait, rentrez la commande suivante :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo raspi-config
</pre></div>
</div>
<p>Vous arrivez sur une nouvelle interface, vous pouvez naviguer avec les touches flèches et entrer.
Interface Options &gt; SSH, on vous demande ensuite si vous voulez activer le SSH, choisissez évidement Oui puis Ok. Vous pourrez quitter la fenêtre avec Echap.</p>
<a class="reference internal image-reference" href="../_images/raspi_config.png"><img alt="../_images/raspi_config.png" class="align-center" src="../_images/raspi_config.png" style="width: 896.25px; height: 450.0px;" /></a>
<p></p>
<p>Vous pouvez maintenant redemarer la PI.</p>
</div>
</div>
<div class="section" id="hotspot-wifi">
<h1><span class="section-number">8.3.2. </span>Hotspot WIFI<a class="headerlink" href="#hotspot-wifi" title="Lien permanent vers ce titre">¶</a></h1>
<p>Nous allons maintenant faire en sorte que la PI émette un réseau wifi sur lequel nous pourrons nous connecter, ce dernier ne sera connecté à aucun réseau Internet , mais nous permettra de nous connecter en SSH dessus pour travailler plus facilement.</p>
<div class="section" id="prerequis">
<h2><span class="section-number">8.3.2.1. </span>Prerequis<a class="headerlink" href="#prerequis" title="Lien permanent vers ce titre">¶</a></h2>
<p>Attention l’étape précédente d’ajout d’une IP fixe sur l’interface wlan0 est nécessaire pour le bon fonctionnement de cette partie.</p>
<p>Commençons par installer les services nécessaires :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install hostapd
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo apt-get install dnsmasq
</pre></div>
</div>
<p>Nous allons rapidement nous assurer que ces services seront bien actifs au démarrage puis nous les stoppons le temps de faire notre configuration reseau.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl unmask hostapd.service
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl unable hostapd.service
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl stop hostapd
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl unmask dnsmasq.service
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl unable dnsmasq.service
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo systemctl stop dnsmasq
</pre></div>
</div>
</div>
<div class="section" id="addresse-ip-fixe-en-wifi">
<h2><span class="section-number">8.3.2.2. </span>Addresse IP fixe en wifi<a class="headerlink" href="#addresse-ip-fixe-en-wifi" title="Lien permanent vers ce titre">¶</a></h2>
<p>Rendez vous dans le fichier suivant :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo nano /etc/dhcpcd.conf
</pre></div>
</div>
<p>Puis ajouter les deux lignes suivantes à la fin du fichier. Ces dernières permettent de fixer l’IP de la pi sur l’interface wifi wlan0 pour le reseau wifi.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>interface wlan0
        static <span class="nv">ip_address</span><span class="o">=</span><span class="m">192</span>.168.1.10/24
</pre></div>
</div>
<p>Enregistrez et fermez le fichier avec CTRL+X puis Y.</p>
<a class="reference internal image-reference" href="../_images/dhcpcd.conf.png"><img alt="../_images/dhcpcd.conf.png" class="align-center" src="../_images/dhcpcd.conf.png" style="width: 1317.0px; height: 434.25px;" /></a>
<p></p>
<p>Attention l’adresse IP renseignée doit être la même que l’IP fixe déclarée dans le fichier /etc/netowork/interfaces sur l’interface wlan0.</p>
</div>
<div class="section" id="configuration-du-server-dhcp">
<h2><span class="section-number">8.3.2.3. </span>Configuration du server DHCP<a class="headerlink" href="#configuration-du-server-dhcp" title="Lien permanent vers ce titre">¶</a></h2>
<p>Sauvegardons d’abord le fichier initialement présent.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo mv /etc/dnsmasq.conf /etc/dnsmasq.conf.old
</pre></div>
</div>
<p>Puis créons notre propre serveur grâce au fichier suivant :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo nano /etc/dnsmasq.conf
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">interface</span><span class="o">=</span>wlan0
        dhcp-range<span class="o">=</span><span class="m">192</span>.168.1.11,192.168.1.100,255.255.255.0,24h
</pre></div>
</div>
<p>Enregistrez et fermez le fichier avec CTRL+X puis Y.</p>
<a class="reference internal image-reference" href="../_images/dnsmasq.conf.png"><img alt="../_images/dnsmasq.conf.png" class="align-center" src="../_images/dnsmasq.conf.png" style="width: 896.25px; height: 450.0px;" /></a>
<p></p>
</div>
<div class="section" id="parametrage-du-reseau-wifi">
<h2><span class="section-number">8.3.2.4. </span>Parametrage du reseau wifi<a class="headerlink" href="#parametrage-du-reseau-wifi" title="Lien permanent vers ce titre">¶</a></h2>
<p>Paramétrons le réseau wifi dans le fichier suivant :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo nano /etc/hostapd/hostapd.conf
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">interface</span><span class="o">=</span>wlan0
<span class="nv">hw_mode</span><span class="o">=</span>g
<span class="nv">channel</span><span class="o">=</span><span class="m">7</span>
<span class="nv">macaddr_acl</span><span class="o">=</span><span class="m">0</span>
<span class="nv">auth_algs</span><span class="o">=</span><span class="m">1</span>
<span class="nv">ignore_broadcast_ssid</span><span class="o">=</span><span class="m">0</span>
<span class="nv">wpa</span><span class="o">=</span><span class="m">2</span>
<span class="nv">wpa_key_mgmt</span><span class="o">=</span>WPA-PSK
<span class="nv">wpa_pairwise</span><span class="o">=</span>TKIP
<span class="nv">ssid</span><span class="o">=</span>NOM_DU_RESEAU
<span class="nv">wpa_passphrase</span><span class="o">=</span>MOT_DE_PASSE
</pre></div>
</div>
<p>Avec NOM_DU_RESEAU et MOT_DE_PASSE a compléter selon vos besoins.</p>
<a class="reference internal image-reference" href="../_images/hostapd.conf.png"><img alt="../_images/hostapd.conf.png" class="align-center" src="../_images/hostapd.conf.png" style="width: 896.25px; height: 450.0px;" /></a>
<p></p>
<p>Nous devons maintenant indiquer au système le chemin vers cette configuration.
Rendez vous dans le fichier suivant :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo nano /etc/default/hostapd
</pre></div>
</div>
<p>Puis trouvez la ligne #DAEMON_CONF= » » pour la modifier :</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">DAEMON_CONF</span><span class="o">=</span><span class="s2">&quot;/etc/hostapd/hostapd.conf&quot;</span>
</pre></div>
</div>
<a class="reference internal image-reference" href="../_images/hostapd.png"><img alt="../_images/hostapd.png" class="align-center" src="../_images/hostapd.png" style="width: 810.0px; height: 450.0px;" /></a>
</div>
<div class="section" id="test">
<h2><span class="section-number">8.3.2.5. </span>Test<a class="headerlink" href="#test" title="Lien permanent vers ce titre">¶</a></h2>
<p>Vous pouvez désormais redémarrer la PI et le réseau wifi devrait apparaître. Attention, il est impératif que la PI ne se connecte pas à aucun autre réseau wifi pour pouvoir émettre son propre réseau.</p>
<a class="reference internal image-reference" href="../_images/wifi.png"><img alt="../_images/wifi.png" class="align-center" src="../_images/wifi.png" style="width: 409.0px; height: 90.0px;" /></a>
<p><a class="reference external" href="https://www.instructables.com/Raspberry-Pi-Wifi-Hotspot/">Tuto suivis durant cette phase :</a></p>
</div>
</div>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<h1 class="logo"><a href="../index.html">Doc Outil Crubs</a></h1>








<h3>Navigation</h3>
<p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../Gestion/Tree.html">1. Gestion</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Informatique_Programmation/Tree.html">2. Programmation et Informatique</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Robot-2023/Tree.html">3. Robots Coupe de France de Robotique 2023</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Robot-2024/Tree.html">4. Robots Coupe de France de Robotique 2024</a></li>
<li class="toctree-l1"><a class="reference internal" href="../Voron-0.1/Tree.html">5. Imprimante 3D Voron 0.1</a></li>
<li class="toctree-l1"><a class="reference internal" href="../CAO/Tree.html">6. CAO</a></li>
<li class="toctree-l1"><a class="reference internal" href="../FAO/Tree.html">7. FAO</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="Tree.html">8. Banc de test portatif</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="Tree-Introduction.html">8.1. Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tree-Boite.html">8.2. Boite</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="Tree-Configuration_Raspi.html">8.3. Configuration Raspi</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tree-Liaison_Serie.html">8.4. Liaison Serie</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tree-Capteurs.html">8.5. Capteurs</a></li>
<li class="toctree-l2"><a class="reference internal" href="Tree-Manuel.html">8.6. Manuel</a></li>
</ul>
</li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="Tree.html"><span class="section-number">8. </span>Banc de test portatif</a><ul>
  <li><a href="Tree-Configuration_Raspi.html"><span class="section-number">8.3. </span>Configuration Raspi</a><ul>
      <li>Previous: <a href="Tree-Configuration_Raspi.html" title="Chapitre précédent"><span class="section-number">8.3. </span>Configuration Raspi</a></li>
      <li>Next: <a href="Tree-Liaison_Serie.html" title="Chapitre suivant"><span class="section-number">8.4. </span>Liaison Serie</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Recherche rapide</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2023, CRUBS.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 4.5.0</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.12</a>
      
      |
      <a href="../_sources/Banc-de-test/Configuration_Raspi.rst.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>